import { Callout } from 'nextra/components'

# Perpetual formula

`@orderly.network/perp`

{/* 合约交易相关的计算公式库。 本库是纯函数式的, 无上下文依赖，直接调用对应的函数即可。 */}


A library of calculation formulas related to Orderly futures trading. This library is designed to be purely functional, with no context dependencies. Simply call the appropriate functions directly for seamless integration.


## Install

```sh npm2yarn copy
npm install @orderly.network/perp
```

## Usage


```typescript
import { maxQty, liqPrice } from '@orderly.network/perp'
import { OrderSide } from '@orderly.network/types'

// calculation of the maximum allowable position size for an account
const myMaxQty = ()=>{
    const qty = maxQty('PERP_ETH_USDC',OrderSide.BUY);
    console.log(qty) // 
}

// calculation of the liquidation price of a position
const myLiqPrice = ()=>{
    const price = liqPrice(
        25986.2,//markPrice
        1981.66,// total collateral
        0.2,// positions size
        0.05//MMR
    );
    console.log(myLiqPrice) // 
}
```

<Callout type="info">
If you are a React developer, we recommend utilizing our React Hooks library:[`@orderly.network/hooks`](/). It encapsulates all the calculation formulas, and the hook internally manages the required data for computations. 
</Callout>

## Function list

{/* ### account

- [IMR](/apis/modules/__orderly_network___perp/account/IMR) - 计算账户的 IMR
- [availableBalance](/apis/modules/__orderly_network___perp/account/availableBalance) - 计算账户的可用余额
- [currentLeverage](/apis/modules/__orderly_network___perp/account/currentLeverage) - 计算账户的当前杠杆
- [freeCollateral](/apis/modules/__orderly_network___perp/account/freeCollateral) - 计算账户的可用保证金
- [maxQty](/apis/modules/__orderly_network___perp/account/maxQty) - 计算账户的最大可开仓数量
- [totalCollateral](/apis/modules/__orderly_network___perp/account/totalCollateral) - 计算账户的总保证金
- [totalInitialMarginWithOrders](/apis/modules/__orderly_network___perp/account/totalInitialMarginWithOrders) - 计算账户的总初始保证金
- [totalMarginRatio](/apis/modules/__orderly_network___perp/account/totalMarginRatio) - 计算账户的总保证金率
- [totalUnrealizedROI](/apis/modules/__orderly_network___perp/account/totalUnrealizedROI) - 计算账户的总未实现收益率
- [totalValue](/apis/modules/__orderly_network___perp/account/totalValue) - 计算账户的总价值

### positions

- [MMR](/apis/modules/__orderly_network___perp/positions/MMR) - 计算仓位的 MMR
- [liqPrice](/apis/modules/__orderly_network___perp/positions/liqPrice) - 计算仓位的强平价格
- [maintenanceMargin](/apis/modules/__orderly_network___perp/positions/maintenanceMargin) - 计算仓位的维持保证金
- [totalNotional](/apis/modules/__orderly_network___perp/positions/totalNotional) - 计算仓位的总名义价值
- [unrealizedPnL](/apis/modules/__orderly_network___perp/positions/unrealizedPnL) - 计算单个仓位的未实现盈亏
- [unrealizedPnLROI](/apis/modules/__orderly_network___perp/positions/unrealizedPnLROI) - 计算单个仓位的未实现收益率
- [totalUnrealizedPnL](/apis/modules/__orderly_network___perp/positions/totalUnrealizedPnL) - 计算仓位的总未实现盈亏
- [unsettlementPnL](/apis/modules/__orderly_network___perp/positions/unsettlementPnL) - 计算单个仓位的未结算盈亏
- [totalUnsettlementPnL](/apis/modules/__orderly_network___perp/positions/totalUnsettlementPnL) - 计算仓位的总未结算盈亏 */}

### account

- [IMR](/apis/modules/__orderly_network___perp/account/IMR) - Calculate the IMR of the account.
- [availableBalance](/apis/modules/__orderly_network___perp/account/availableBalance) - Calculate the available balance of the account.
- [currentLeverage](/apis/modules/__orderly_network___perp/account/currentLeverage) - Calculate the current leverage of the account.
- [freeCollateral](/apis/modules/__orderly_network___perp/account/freeCollateral) - Calculate the available collateral of the account.
- [maxQty](/apis/modules/__orderly_network___perp/account/maxQty) - Calculate the maximum quantity the account can open.
- [totalCollateral](/apis/modules/__orderly_network___perp/account/totalCollateral) - Calculate the total collateral of the account.
- [totalInitialMarginWithOrders](/apis/modules/__orderly_network___perp/account/totalInitialMarginWithOrders) - Calculate the total initial margin of the account with orders.
- [totalMarginRatio](/apis/modules/__orderly_network___perp/account/totalMarginRatio) - Calculate the total margin ratio of the account.
- [totalUnrealizedROI](/apis/modules/__orderly_network___perp/account/totalUnrealizedROI) - Calculate the total unrealized return on investment of the account.
- [totalValue](/apis/modules/__orderly_network___perp/account/totalValue) - Calculate the total value of the account.

### positions

- [MMR](/apis/modules/__orderly_network___perp/positions/MMR) - Calculate the MMR of the position.
- [liqPrice](/apis/modules/__orderly_network___perp/positions/liqPrice) - Calculate the liquidation price of the position.
- [maintenanceMargin](/apis/modules/__orderly_network___perp/positions/maintenanceMargin) - Calculate the maintenance margin of the position.
- [totalNotional](/apis/modules/__orderly_network___perp/positions/totalNotional) - Calculate the total notional value of the position.
- [unrealizedPnL](/apis/modules/__orderly_network___perp/positions/unrealizedPnL) - Calculate the unrealized profit and loss of an individual position.
- [unrealizedPnLROI](/apis/modules/__orderly_network___perp/positions/unrealizedPnLROI) - Calculate the unrealized return on investment of an individual position.
- [totalUnrealizedPnL](/apis/modules/__orderly_network___perp/positions/totalUnrealizedPnL) - Calculate the total unrealized profit and loss of the positions.
- [unsettlementPnL](/apis/modules/__orderly_network___perp/positions/unsettlementPnL) - Calculate the unsettlement profit and loss of an individual position.
- [totalUnsettlementPnL](/apis/modules/__orderly_network___perp/positions/totalUnsettlementPnL) - Calculate the total unsettlement profit and loss of the positions.

**For more details please see [API docs](/apis/modules/__orderly_network___perp).**